<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>R Club 番外編- Day 01</title>
    <meta charset="utf-8" />
    <meta name="author" content="Kenji Sato" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c|Sawarabi+Gothic|Source+Code+Pro|Yanone+Kaffeesatz" rel="stylesheet">
    <link rel="stylesheet" href="../asset/remark-css/style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# R Club 番外編- Day 01
## <a href="https://opueco.github.io/rclub-slides/2019n-01" class="uri">https://opueco.github.io/rclub-slides/2019n-01</a>
### Kenji Sato
### 2019/8/7

---




## コンテンツ

R で時系列分析  
コンテンツは固まっていないので，手探りで進めます。

- 馬場『[時系列分析と状態空間モデルの基礎: RとStanで学ぶ理論と実装](https://www.amazon.co.jp/%E6%99%82%E7%B3%BB%E5%88%97%E5%88%86%E6%9E%90%E3%81%A8%E7%8A%B6%E6%85%8B%E7%A9%BA%E9%96%93%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E5%9F%BA%E7%A4%8E-R%E3%81%A8Stan%E3%81%A7%E5%AD%A6%E3%81%B6%E7%90%86%E8%AB%96%E3%81%A8%E5%AE%9F%E8%A3%85-%E9%A6%AC%E5%A0%B4-%E7%9C%9F%E5%93%89/dp/4903814874)』
- [DataCamp](https://www.datacamp.com)
- [R Cookbook; Ch. 14](https://rc2e.com/timeseriesanalysis)

予定としては  
  8/7 (本日), 8/14 (水), 8/22 (**木**), 8/28 (水)　  
あたりで，15時間くらい

---

## 目標

- R で時系列データの操作をやってみる
- R 初心者に時系列データ分析の基礎を教えられるようになる
  - 教育用教材の収集と理解
  - 後期 RClub 用のネタ探し
- 自分の研究に使う
- ファイナンスデータを分析して資産運用に役立てる

---

## 必要になりそうなもの（to be added）

{xts}, {zoo}, 

{quantmod}, {forecast}, {tseries}

{urca}

---

## 時系列データ

時間でラベル付けされたデータのこと。


```r
&gt; AirPassengers
```

```
##      Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
## 1949 112 118 132 129 121 135 148 148 136 119 104 118
## 1950 115 126 141 135 125 149 170 170 158 133 114 140
## 1951 145 150 178 163 172 178 199 199 184 162 146 166
## 1952 171 180 193 181 183 218 230 242 209 191 172 194
## 1953 196 196 236 235 229 243 264 272 237 211 180 201
## 1954 204 188 235 227 234 264 302 293 259 229 203 229
## 1955 242 233 267 269 270 315 364 347 312 274 237 278
## 1956 284 277 317 313 318 374 413 405 355 306 271 306
## 1957 315 301 356 348 355 422 465 467 404 347 305 336
## 1958 340 318 362 348 363 435 491 505 404 359 310 337
## 1959 360 342 406 396 420 472 548 559 463 407 362 405
## 1960 417 391 419 461 472 535 622 606 508 461 390 432
```

---

## ts / zoo / xts

R にバンドルされている {stats} パッケージで基本的な時系列分析用の `ts` クラスが定義されている。


```r
&gt; class(AirPassengers)
```

```
## [1] "ts"
```


機能が豊富な `zoo`, `xts` を使うのが主流らしい。`zoo` で使える手法のほとんどが `xts` クラスに対しても使えるので，とりあえず `xts` にする。


```r
&gt; library(xts)
&gt; airpassengers &lt;- as.xts(AirPassengers)
&gt; class(airpassengers)
```

```
## [1] "xts" "zoo"
```


---

## クラス (1/)

クラスというのは，

- データ保存方法のルール
- データ操作方法のルール（メソッド）

をまとめたもの。特定クラスのルールに従って作られたデータを「オブジェクト」とか「インスタンス」という。

R にはクラスの作り方が 4つある (S3, S4, RC, R6)。以下の説明は S3 というもっともシンプルなやりかた。

---

## クラス (2/)

作ってみよう。


```r
Student &lt;- function(id, name, score){
  structure(list(id=id, name=name, score=score), 
            class = "student")
}
x &lt;- Student(10, "Kenji", c(math = 100, eng = 90))
x
```

```
## ID: 10
## Name: Kenji
## Scores
## math  eng 
##  100   90
```

---

## クラス (3/)

`print` という関数には `print.****` という関数がたくさんある。


```r
&gt; methods(print)
```

```
##  [1] "print.acf"     "print.AES"     "print.anova"  
##  [4] "print.aov"     "print.aovlist" "print.ar"     
##  [7] "print.Arima"   "print.arima0"  "print.AsIs"   
## [10] "print.aspell"
```

ドットの後ろはクラスの名前，例えば `print.ar` はクラスが `ar` であるオブジェクトに対する `print` 関数

`x` のクラスが `ar` であれば， `print(x)` を呼び出すと `print.ar(x)` が実行される。

---

## クラス (4/)

`print.student` を作ってみよう。


```r
print.student &lt;- function(x, ...) {
  cat("ID: ", x[["id"]], "\n", 
      "Name: ", x[["name"]], "\n", sep = "")
  cat("Scores\n")
  print.default(x[["score"]])
  invisible(x)
}

print(x)
```

```
## ID: 10
## Name: Kenji
## Scores
## math  eng 
##  100   90
```

---

## クラス (5/)

他にも色々とやってみよう。すべての関数が `print.student` のように拡張できる訳ではないことに注意。`print` は「S3 ジェネリック」という特殊な関数だからうまくいく


```r
&gt; print
```

```
## function (x, ...) 
## UseMethod("print")
## &lt;bytecode: 0x7f8c7e7dc640&gt;
## &lt;environment: namespace:base&gt;
```

特定のデータの構造に特有の操作をまとめるとコードの管理が容易になる。xts, zoo などは時系列分析のために作られたクラス



---

## quantmod (1/)


```r
&gt; # install.packages("quantmod")
&gt; library(quantmod)
```

---

## quantmod (2/)


```r
&gt; getSymbols(c("AAPL", "GOOG"), src = "yahoo")
```

```
## [1] "AAPL" "GOOG"
```

```r
&gt; AAPL
```

```
##            AAPL.Open AAPL.High  AAPL.Low AAPL.Close
## 2007-01-03  12.32714  12.36857  11.70000   11.97143
## 2007-01-04  12.00714  12.27857  11.97429   12.23714
## 2007-01-05  12.25286  12.31428  12.05714   12.15000
## 2007-01-08  12.28000  12.36143  12.18286   12.21000
## 2007-01-09  12.35000  13.28286  12.16429   13.22429
## 2007-01-10  13.53571  13.97143  13.35000   13.85714
## 2007-01-11  13.70571  13.82571  13.58571   13.68572
## 2007-01-12  13.51286  13.58000  13.31857   13.51714
## 2007-01-16  13.66857  13.89286  13.63571   13.87143
## 2007-01-17  13.93714  13.94286  13.54571   13.56428
## 2007-01-18  13.15714  13.15857  12.72143   12.72429
## 2007-01-19  12.66143  12.80714  12.58857   12.64286
## 2007-01-22  12.73428  12.73714  12.23571   12.39857
## 2007-01-23  12.24714  12.50143  12.21571   12.24286
## 2007-01-24  12.38286  12.45000  12.29714   12.38571
## 2007-01-25  12.44429  12.64286  12.29000   12.32143
## 2007-01-26  12.44429  12.48143  12.14143   12.19714
## 2007-01-29  12.32857  12.37857  12.21857   12.27714
## 2007-01-30  12.34714  12.35571  12.17857   12.22143
## 2007-01-31  12.12286  12.28571  12.05000   12.24714
## 2007-02-01  12.31857  12.32429  12.10571   12.10571
## 2007-02-02  12.01714  12.17857  11.95714   12.10714
## 2007-02-05  12.04286  12.17571  11.99143   11.99143
## 2007-02-06  12.06428  12.06714  11.83714   12.02143
## 2007-02-07  12.06857  12.34000  11.93572   12.30714
## 2007-02-08  12.20429  12.35857  12.20143   12.31143
## 2007-02-09  12.26857  12.31428  11.88714   11.89571
## 2007-02-12  12.06143  12.16857  11.94714   12.12571
## 2007-02-13  12.16571  12.18429  12.04286   12.10000
## 2007-02-14  12.09000  12.23428  12.08143   12.18572
## 2007-02-15  12.20571  12.23143  12.11143   12.17286
## 2007-02-16  12.17857  12.20143  12.09429   12.11857
## 2007-02-20  12.09286  12.30857  12.02286   12.27143
## 2007-02-21  12.28286  12.78429  12.28000   12.74286
## 2007-02-22  12.97143  12.97286  12.64714   12.78714
## 2007-02-23  12.73714  12.90571  12.69286   12.72429
## 2007-02-26  12.83429  12.85714  12.51572   12.64429
## 2007-02-27  12.32857  12.44000  11.91571   11.99000
## 2007-02-28  11.85714  12.22857  11.85714   12.08714
## 2007-03-01  12.00429  12.61571  11.96429   12.43714
## 2007-03-02  12.39571  12.50571  12.17286   12.20143
## 2007-03-05  12.27000  12.66429  12.25143   12.33143
## 2007-03-06  12.54286  12.61571  12.48571   12.59857
## 2007-03-07  12.57857  12.71000  12.49286   12.53143
## 2007-03-08  12.65571  12.67429  12.49429   12.57143
## 2007-03-09  12.68572  12.69286  12.48571   12.56714
## 2007-03-12  12.58143  12.85571  12.57000   12.83857
## 2007-03-13  12.77286  12.94286  12.62857   12.62857
## 2007-03-14  12.65714  12.85714  12.56000   12.85714
## 2007-03-15  12.85143  12.90857  12.75857   12.79571
## 2007-03-16  12.79143  12.85571  12.76000   12.79857
## 2007-03-19  12.89143  13.07857  12.79857   13.01857
## 2007-03-20  13.05000  13.12000  13.00857   13.06857
## 2007-03-21  13.14143  13.42857  13.09286   13.41000
## 2007-03-22  13.39000  13.48000  13.28571   13.42286
## 2007-03-23  13.33571  13.43857  13.32857   13.36000
## 2007-03-26  13.42714  13.70000  13.32857   13.69286
## 2007-03-27  13.67286  13.83286  13.57143   13.63714
## 2007-03-28  13.55429  13.62857  13.30714   13.32000
## 2007-03-29  13.45571  13.45571  13.17571   13.39286
## 2007-03-30  13.46857  13.52571  13.25000   13.27286
## 2007-04-02  13.44857  13.46429  13.28857   13.37857
## 2007-04-03  13.44857  13.60429  13.39429   13.50000
## 2007-04-04  13.56286  13.59143  13.44714   13.46714
## 2007-04-05  13.44571  13.52571  13.36000   13.52571
## 2007-04-09  13.60143  13.61429  13.29143   13.37857
## 2007-04-10  13.38143  13.46571  13.34429   13.46429
## 2007-04-11  13.41429  13.42143  13.19000   13.22714
## 2007-04-12  13.14857  13.18714  12.96000   13.17000
## 2007-04-13  12.98571  13.05714  12.86571   12.89143
## 2007-04-16  12.93857  13.07143  12.89286   13.06143
## 2007-04-17  13.14286  13.18572  12.81428   12.90714
## 2007-04-18  12.88000  12.97857  12.80000   12.91429
## 2007-04-19  12.88429  13.03571  12.83286   12.89571
## 2007-04-20  12.98428  13.02571  12.93572   12.99571
## 2007-04-23  13.08429  13.40000  13.06000   13.35857
## 2007-04-24  13.42286  13.77000  13.04286   13.32000
## 2007-04-25  13.46143  13.62857  13.40000   13.62143
## 2007-04-26  14.51143  14.64286  14.04286   14.12000
## 2007-04-27  14.02571  14.27857  13.95571   14.27429
## 2007-04-30  14.29857  14.42857  14.23857   14.25714
## 2007-05-01  14.22714  14.33571  14.07857   14.21000
## 2007-05-02  14.23571  14.36286  14.21000   14.34143
## 2007-05-03  14.39000  14.49286  14.28714   14.34286
## 2007-05-04  14.40000  14.51429  14.35714   14.40143
## 2007-05-07  14.44000  14.90714  14.43000   14.84572
## 2007-05-08  14.78143  15.02143  14.77429   15.00857
## 2007-05-09  14.98714  15.28000  14.98428   15.26857
## 2007-05-10  15.23286  15.54857  15.13143   15.33429
## 2007-05-11  15.39143  15.59000  15.25429   15.53429
## 2007-05-14  15.66000  15.71429  15.46429   15.62286
## 2007-05-15  15.65286  15.74286  15.21143   15.36000
## 2007-05-16  15.50429  15.54714  14.77429   15.33429
## 2007-05-17  15.30714  15.69571  15.30714   15.63429
## 2007-05-18  15.74714  15.80571  15.68143   15.71714
## 2007-05-21  15.75857  16.06429  15.72143   15.99714
## 2007-05-22  16.07000  16.25000  16.00143   16.22000
## 2007-05-23  16.28857  16.42857  16.08429   16.12714
## 2007-05-24  16.11572  16.35143  15.76714   15.81286
## 2007-05-25  16.00000  16.25429  15.92857   16.23143
## 2007-05-29  16.35000  16.40857  16.09857   16.33571
## 2007-05-30  16.32857  16.98286  16.21857   16.96714
## 2007-05-31  17.15286  17.45286  17.07714   17.31286
## 2007-06-01  17.30000  17.31286  16.89857   16.91429
## 2007-06-04  16.94714  17.39000  16.84286   17.33286
## 2007-06-05  17.34429  17.52714  17.21429   17.52429
## 2007-06-06  17.47143  17.72143  17.42143   17.66286
## 2007-06-07  17.85572  18.23000  17.59857   17.72428
## 2007-06-08  17.97428  17.97571  17.47000   17.78429
## 2007-06-11  18.00000  18.02143  17.07714   17.17000
## 2007-06-12  17.05000  17.38714  16.90143   17.19714
## 2007-06-13  17.30714  17.31286  16.48571   16.78571
## 2007-06-14  16.74286  17.06429  16.63143   16.96429
## 2007-06-15  17.23143  17.23857  17.12286   17.21429
## 2007-06-18  17.61143  17.88286  17.50571   17.87000
## 2007-06-19  17.81286  17.85857  17.55857   17.66571
## 2007-06-20  17.69571  17.80857  17.35714   17.36429
## 2007-06-21  17.38571  17.75571  17.24571   17.70000
## 2007-06-22  17.69286  17.77857  17.48286   17.57143
## 2007-06-25  17.74143  17.87000  17.29428   17.47714
## 2007-06-26  17.71143  17.71429  16.96000   17.09286
## 2007-06-27  17.23000  17.43429  17.03714   17.41286
## 2007-06-28  17.48000  17.49857  17.14286   17.22286
## 2007-06-29  17.42429  17.71429  17.29857   17.43429
## 2007-07-02  17.29286  17.44143  17.04286   17.32286
## 2007-07-03  17.42857  18.20000  17.35714   18.16714
## 2007-07-05  18.40000  18.99571  18.38428   18.96429
## 2007-07-06  19.01857  19.04857  18.62857   18.90000
## 2007-07-09  18.91143  18.98571  18.45429   18.61857
## 2007-07-10  18.41143  19.21429  18.40143   18.90714
## 2007-07-11  18.86714  19.10000  18.75857   18.91286
## 2007-07-12  19.12143  19.17714  18.91286   19.15286
## 2007-07-13  19.29000  19.69286  19.21714   19.67571
## 2007-07-16  19.77000  19.99714  19.64286   19.72857
## 2007-07-17  19.75714  19.94286  19.64286   19.84429
## 2007-07-18  19.74143  19.77714  19.43429   19.73143
## 2007-07-19  20.04286  20.11572  19.95000   20.00000
## 2007-07-20  20.23571  20.59714  20.00000   20.53571
## 2007-07-23  20.47286  20.74571  20.13286   20.52857
## 2007-07-24  19.84000  20.14286  19.16429   19.27000
## 2007-07-25  19.62143  19.76572  19.28571   19.60857
## 2007-07-26  20.84429  21.21429  19.56571   20.85714
## 2007-07-27  20.88428  21.27429  20.54000   20.55000
## 2007-07-30  20.61857  20.77857  19.93857   20.20429
## 2007-07-31  20.42429  20.49714  18.78857   18.82286
## 2007-08-01  19.09143  19.34000  18.25286   19.28571
## 2007-08-02  19.52143  19.56571  19.16429   19.49857
## 2007-08-03  19.32286  19.42143  18.78571   18.83571
## 2007-08-06  18.98571  19.32429  18.32857   19.32143
## 2007-08-07  19.27714  19.60572  18.94714   19.29000
## 2007-08-08  19.53714  19.55143  18.85714   19.14428
## 2007-08-09  18.73000  19.00000  17.87000   18.05571
## 2007-08-10  17.58857  18.25000  17.18571   17.85714
## 2007-08-13  18.33143  18.47857  18.07143   18.25571
## 2007-08-14  18.32714  18.32857  17.67286   17.71857
## 2007-08-15  17.53429  17.83714  17.09286   17.12857
## 2007-08-16  16.71571  16.92857  15.94571   16.72143
## 2007-08-17  17.43000  17.64286  17.11714   17.43714
## 2007-08-20  17.70857  17.78571  17.21429   17.46000
## 2007-08-21  17.45857  18.42286  17.28571   18.22428
## 2007-08-22  18.74571  18.96429  18.61857   18.93000
## 2007-08-23  19.01286  19.04857  18.53714   18.72428
## 2007-08-24  18.64714  19.33857  18.54428   19.32857
## 2007-08-27  19.05571  19.23714  18.87143   18.89286
## 2007-08-28  18.71286  18.91571  18.09000   18.11714
## 2007-08-29  18.55429  19.16857  18.50571   19.15429
##            AAPL.Volume AAPL.Adjusted
## 2007-01-03   309579900     10.487321
## 2007-01-04   211815100     10.720094
## 2007-01-05   208685400     10.643752
## 2007-01-08   199276700     10.696313
## 2007-01-09   837324600     11.584859
## 2007-01-10   738220000     12.139262
## 2007-01-11   360063200     11.989083
## 2007-01-12   328172600     11.841410
## 2007-01-16   311019100     12.151772
## 2007-01-17   411565000     11.882710
## 2007-01-18   591151400     11.146847
## 2007-01-19   341118400     11.075509
## 2007-01-22   363506500     10.861509
## 2007-01-23   301856100     10.725096
## 2007-01-24   231953400     10.850245
## 2007-01-25   226493400     10.793929
## 2007-01-26   246718500     10.685053
## 2007-01-29   225416100     10.755135
## 2007-01-30   144492600     10.706326
## 2007-01-31   214017300     10.728851
## 2007-02-01   166085500     10.604955
## 2007-02-02   155382500     10.606208
## 2007-02-05   144713100     10.504840
## 2007-02-06   216098400     10.531120
## 2007-02-07   266706300     10.781416
## 2007-02-08   169757700     10.785170
## 2007-02-09   215135200     10.420993
## 2007-02-12   181017900     10.622478
## 2007-02-13   145246500     10.599951
## 2007-02-14   126995400     10.675040
## 2007-02-15    90915300     10.663776
## 2007-02-16    99967000     10.616222
## 2007-02-20   154425600     10.750130
## 2007-02-21   288828400     11.163113
## 2007-02-22   209556200     11.201908
## 2007-02-23   129473400     11.146847
## 2007-02-26   153962200     11.076762
## 2007-02-27   286453300     10.503589
## 2007-02-28   229868800     10.588690
## 2007-03-01   353882200     10.895303
## 2007-03-02   215000100     10.688806
## 2007-03-05   209724900     10.802691
## 2007-03-06   180796700     11.036715
## 2007-03-07   156571100     10.977896
## 2007-03-08   127752800     11.012938
## 2007-03-09   112959000     11.009181
## 2007-03-12   182352100     11.246961
## 2007-03-13   216972700     11.062997
## 2007-03-14   199146500     11.263230
## 2007-03-15   139874700     11.209416
## 2007-03-16   142926000     11.211919
## 2007-03-19   178240300     11.404646
## 2007-03-20   122229100     11.448448
## 2007-03-21   171724000     11.747550
## 2007-03-22   140373100     11.758811
## 2007-03-23   112721000     11.703749
## 2007-03-26   216246800     11.995340
## 2007-03-27   233013200     11.946534
## 2007-03-28   235584300     11.668706
## 2007-03-29   181430900     11.732532
## 2007-03-30   150139500     11.627406
## 2007-04-02   125498100     11.720019
## 2007-04-03   145983600     11.826391
## 2007-04-04   119196000     11.797607
## 2007-04-05    88879000     11.848919
## 2007-04-09   103335400     11.720019
## 2007-04-10    88116700     11.795105
## 2007-04-11   137254600     11.587361
## 2007-04-12   164168900     11.537302
## 2007-04-13   179985400     11.293265
## 2007-04-16   152258400     11.442190
## 2007-04-17   187980100     11.307034
## 2007-04-18   116011000     11.313292
## 2007-04-19   106478400     11.297022
## 2007-04-20   130694900     11.384621
## 2007-04-23   195072500     11.702498
## 2007-04-24   263813200     11.668706
## 2007-04-25   296786000     11.932769
## 2007-04-26   434444500     12.369531
## 2007-04-27   174850900     12.504688
## 2007-04-30   154127400     12.489673
## 2007-05-01   133130900     12.448374
## 2007-05-02   126286300     12.563507
## 2007-05-03   144019400     12.564759
## 2007-05-04    95496800     12.616070
## 2007-05-07   215389300     13.005277
## 2007-05-08   195999300     13.147945
## 2007-05-09   179439400     13.375714
## 2007-05-10   299314400     13.433280
## 2007-05-11   163424100     13.608483
## 2007-05-14   162986600     13.686078
## 2007-05-15   238628600     13.455806
## 2007-05-16   281691900     13.433280
## 2007-05-17   183822800     13.696090
## 2007-05-18   155336300     13.768674
## 2007-05-21   159973100     14.013963
## 2007-05-22   143102400     14.209189
## 2007-05-23   227843700     14.127845
## 2007-05-24   221840500     13.852521
## 2007-05-25   158239900     14.219203
## 2007-05-29   161423500     14.310559
## 2007-05-30   369611200     14.863709
## 2007-05-31   324266600     15.166566
## 2007-06-01   221315500     14.817407
## 2007-06-04   221668300     15.184086
## 2007-06-05   230196400     15.351784
## 2007-06-06   278060300     15.473173
## 2007-06-07   478769900     15.526992
## 2007-06-08   310420600     15.579554
## 2007-06-11   468564600     15.041418
## 2007-06-12   356641600     15.065195
## 2007-06-13   430338300     14.704778
## 2007-06-14   243316500     14.861204
## 2007-06-15   202804700     15.080214
## 2007-06-18   227651200     15.654640
## 2007-06-19   235756500     15.475680
## 2007-06-20   224378000     15.211624
## 2007-06-21   216761300     15.505715
## 2007-06-22   157969000     15.393078
## 2007-06-25   241350900     15.310484
## 2007-06-26   336251300     14.973838
## 2007-06-27   243674200     15.254169
## 2007-06-28   209535900     15.087724
## 2007-06-29   284460400     15.272942
## 2007-07-02   248715600     15.175326
## 2007-07-03   290620400     15.914948
## 2007-07-05   363262900     16.613262
## 2007-07-06   218673700     16.556948
## 2007-07-09   248955000     16.310408
## 2007-07-10   313751900     16.563208
## 2007-07-11   205443000     16.568207
## 2007-07-12   176152200     16.778460
## 2007-07-13   226901500     17.236496
## 2007-07-16   234028200     17.282804
## 2007-07-17   177489900     17.384171
## 2007-07-18   189214200     17.285307
## 2007-07-19   183222900     17.520578
## 2007-07-20   291943400     17.989882
## 2007-07-23   259122500     17.983622
## 2007-07-24   448823200     16.881083
## 2007-07-25   374045700     17.177683
## 2007-07-26   546657300     18.271461
## 2007-07-27   290274600     18.002392
## 2007-07-30   276747100     17.699539
## 2007-07-31   440598200     16.489372
## 2007-08-01   437539200     16.894850
## 2007-08-02   213161200     17.081312
## 2007-08-03   169796900     16.500633
## 2007-08-06   231292600     16.926134
## 2007-08-07   237484100     16.898605
## 2007-08-08   202024200     16.770948
## 2007-08-09   281348900     15.817325
## 2007-08-10   352687300     15.643380
## 2007-08-13   188227900     15.992536
## 2007-08-14   184751700     15.521981
## 2007-08-15   248213000     15.005127
## 2007-08-16   466672500     14.648460
## 2007-08-17   298765600     15.275444
## 2007-08-20   200829300     15.295466
## 2007-08-21   325761800     15.965003
## 2007-08-22   265441400     16.583229
## 2007-08-23   216709500     16.403019
## 2007-08-24   227958500     16.932390
## 2007-08-27   176859900     16.550686
## 2007-08-28   294841400     15.871145
## 2007-08-29   291715200     16.779711
##  [ reached getOption("max.print") -- omitted 3004 rows ]
```


---

## quantmod (3/)


```r
&gt; GOOG
```

```
##            GOOG.Open GOOG.High  GOOG.Low GOOG.Close
## 2007-01-03  232.1299  237.4400  229.6940   232.9220
## 2007-01-04  233.6243  241.0714  233.3005   240.7277
## 2007-01-05  240.3491  242.8398  238.1623   242.6853
## 2007-01-08  242.9344  244.0204  240.1997   240.8871
## 2007-01-09  241.8186  243.2134  239.7015   241.8435
## 2007-01-10  241.3105  245.8535  240.1200   243.8161
## 2007-01-11  247.6717  249.9382  247.1636   248.9270
## 2007-01-12  250.0577  251.5571  249.0664   251.5571
## 2007-01-16  252.8273  255.5422  250.7103   251.1984
## 2007-01-17  250.7551  252.9369  246.2669   247.7115
## 2007-01-18  246.3367  247.3130  242.8049   243.0042
## 2007-01-19  243.0789  244.4637  242.4612   243.9606
## 2007-01-22  245.3304  245.4052  238.3566   239.5222
## 2007-01-23  239.4973  241.4699  237.7538   238.6306
## 2007-01-24  241.3205  248.8373  240.7426   248.6032
## 2007-01-25  249.5646  251.3080  241.9232   243.1337
## 2007-01-26  244.5484  248.0204  242.6057   246.9942
## 2007-01-29  248.0702  248.4438  244.3342   245.3155
## 2007-01-30  246.0776  248.0702  244.6928   246.2370
## 2007-01-31  247.3180  251.5571  246.8298   249.8136
## 2007-02-01  252.0552  252.0602  239.8659   239.9755
## 2007-02-02  240.4039  241.5945  238.0129   239.8510
## 2007-02-05  237.8584  238.1075  232.2246   232.7077
## 2007-02-06  233.1760  235.7663  232.7576   234.8597
## 2007-02-07  236.0253  236.2893  233.5147   234.1274
## 2007-02-08  233.1511  235.9904  231.7065   234.6355
## 2007-02-09  234.9444  235.4574  229.8883   230.0826
## 2007-02-12  229.4799  230.3317  226.6604   228.2893
## 2007-02-13  228.7177  230.5259  227.7762   228.6928
## 2007-02-14  229.1411  233.6891  228.7526   232.0950
## 2007-02-15  232.1299  232.1947  229.4998   229.8734
## 2007-02-16  230.5359  234.1972  230.1673   234.0926
## 2007-02-20  233.3603  235.4923  231.4873   235.1685
## 2007-02-21  234.0428  238.4462  232.9967   237.0415
## 2007-02-22  238.4512  241.2159  236.3092   237.0365
## 2007-02-23  236.9867  237.5845  233.0266   234.4313
## 2007-02-26  235.5322  236.7377  231.0091   231.5969
## 2007-02-27  226.6505  229.0415  222.7501   223.5471
## 2007-02-28  224.3640  225.9879  220.6928   223.8858
## 2007-03-01  220.5085  225.3653  219.1785   223.2781
## 2007-03-02  221.7239  223.5122  218.5209   218.5209
## 2007-03-05  217.6940  221.9182  217.6841   219.6517
## 2007-03-06  222.8995  228.6430  222.8547   227.9207
## 2007-03-07  230.4811  230.7053  226.2968   226.9693
## 2007-03-08  228.7526  231.8809  226.2021   226.5110
## 2007-03-09  228.1449  228.3441  224.2096   225.6343
## 2007-03-12  225.4400  226.7750  224.7127   226.5259
## 2007-03-13  224.2146  225.1212  220.5882   220.6878
## 2007-03-14  220.7874  223.4923  218.6803   223.1635
## 2007-03-15  223.0938  224.0701  221.1411   222.2619
## 2007-03-16  221.9929  222.5160  219.1237   219.6019
## 2007-03-19  220.7974  223.4126  219.4923   222.7800
## 2007-03-20  222.0627  222.9643  220.9717   221.8086
## 2007-03-21  221.8186  227.4325  221.7737   227.4226
## 2007-03-22  226.9543  230.2221  225.4201   230.1573
## 2007-03-23  229.8634  230.8298  227.6866   230.0527
## 2007-03-26  229.4151  231.6318  226.9593   231.6318
## 2007-03-27  230.9095  231.7464  229.3105   230.9444
## 2007-03-28  230.0726  231.8510  229.2158   230.0776
## 2007-03-29  231.4076  232.1299  226.6505   229.5994
## 2007-03-30  230.1872  230.8348  227.2183   228.2246
## 2007-04-02  228.0253  228.4089  225.2158   228.4089
## 2007-04-03  231.1586  236.2395  231.1337   235.4176
## 2007-04-04  235.1885  235.6169  233.9132   234.6306
## 2007-04-05  234.7700  235.1635  233.9332   234.8746
## 2007-04-09  235.6069  235.6169  231.9257   233.2308
## 2007-04-10  232.6729  234.5160  231.7115   232.3790
## 2007-04-11  232.1598  233.8236  230.4413   231.3977
## 2007-04-12  231.1337  233.1262  230.2569   232.8223
## 2007-04-13  233.3503  233.5097  230.8149   232.2744
## 2007-04-16  233.3553  237.6044  233.2009   236.2495
## 2007-04-17  236.0154  237.3055  234.9195   235.5172
## 2007-04-18  234.7501  239.0540  233.8883   237.1162
## 2007-04-19  236.3640  240.0751  233.9182   234.9444
## 2007-04-20  244.3441  245.3304  240.1100   240.3392
## 2007-04-23  239.1536  241.5945  238.2370   238.6455
## 2007-04-24  238.4114  239.0938  236.8871   237.8734
## 2007-04-25  239.1038  239.7862  237.1660   238.1025
## 2007-04-26  238.1573  241.3205  237.6642   239.6916
## 2007-04-27  239.1387  240.2993  238.2719   238.6106
## 2007-04-30  238.6804  239.7763  234.8099   234.8099
## 2007-05-01  235.2134  235.5222  231.2183   233.6243
## 2007-05-02  233.4500  234.6604  231.9954   232.0203
## 2007-05-03  232.2395  236.1499  231.7762   235.7314
## 2007-05-04  234.1822  236.5334  232.0701   234.6804
## 2007-05-07  235.1885  235.5272  232.3640   232.7625
## 2007-05-08  232.1947  233.2109  231.4973   232.5334
## 2007-05-09  232.2046  234.9842  231.0739   233.7489
## 2007-05-10  232.6480  233.8684  229.6492   229.8734
## 2007-05-11  230.0527  232.6281  229.6393   232.4985
## 2007-05-14  231.8709  232.8821  229.1411   230.0278
## 2007-05-15  230.1175  230.4064  227.8510   228.1449
## 2007-05-16  230.1374  235.6866  228.6530   235.4226
## 2007-05-17  235.3479  236.7227  234.5259   234.6007
## 2007-05-18  235.1337  235.4674  233.9979   234.2819
## 2007-05-21  233.8883  238.7053  232.4886   234.4213
## 2007-05-22  235.6169  238.6106  235.6169   237.0415
## 2007-05-23  239.5123  240.8024  235.9904   236.1000
## 2007-05-24  236.6878  238.7053  234.8696   236.2794
## 2007-05-25  238.9543  241.5695  237.7439   240.8572
## 2007-05-29  241.5945  244.9818  241.0963   242.6455
## 2007-05-30  241.3454  248.4886  240.5982   248.3690
## 2007-05-31  249.3454  253.4400  247.6019   248.0253
## 2007-06-01  249.5646  251.5671  248.0353   249.2657
## 2007-06-04  248.0253  254.3018  247.8659   252.5882
## 2007-06-05  253.9232  258.5310  252.3591   258.4513
## 2007-06-06  257.4102  259.4176  256.6679   258.1573
## 2007-06-07  258.9046  262.2670  255.2981   256.5683
## 2007-06-08  257.1362  258.8498  253.7788   256.7825
## 2007-06-11  256.0503  258.1573  254.0478   254.7153
## 2007-06-12  253.4052  254.8797  250.6455   251.4425
## 2007-06-13  252.5982  253.3205  248.4139   251.6767
## 2007-06-14  251.7464  251.9955  249.9133   250.4811
## 2007-06-15  253.1461  253.5496  249.6791   252.0004
## 2007-06-18  252.1449  257.0366  251.1785   256.6381
## 2007-06-19  256.0453  257.6592  254.8149   256.1947
## 2007-06-20  257.5148  258.4064  253.5795   254.0328
## 2007-06-21  254.5359  256.6829  252.1947   256.0951
## 2007-06-22  257.2458  261.5148  257.0864   261.5098
## 2007-06-25  263.5023  266.4961  260.7128   262.7253
## 2007-06-26  265.3703  265.6045  262.1375   264.1400
## 2007-06-27  261.5197  263.0092  258.8099   262.1624
## 2007-06-28  261.4600  263.7614  260.9220   261.5247
## 2007-06-29  262.0279  262.7153  258.7601   260.3741
## 2007-07-02  261.7639  264.9320  261.1212   264.1997
## 2007-07-03  264.5385  266.2022  262.7651   266.1723
## 2007-07-05  266.7800  271.1835  265.0814   269.8037
## 2007-07-06  269.6144  270.9195  268.3591   268.6929
## 2007-07-09  270.4861  273.3454  269.1213   270.2670
## 2007-07-10  270.8797  272.4787  269.8137   270.6555
## 2007-07-11  270.7900  272.2296  268.9967   271.2184
## 2007-07-12  271.9108  272.6381  269.1013   271.6468
## 2007-07-13  272.9320  275.3031  272.6032   275.0490
## 2007-07-16  274.1225  278.2471  273.6294   275.4625
## 2007-07-17  276.4837  277.8236  275.1586   276.4637
## 2007-07-18  275.9108  276.2147  270.8896   273.7240
## 2007-07-19  275.6966  275.7265  270.1076   273.2707
## 2007-07-20  254.9942  260.6132  253.7987   259.0889
## 2007-07-23  258.5360  259.0291  255.1188   255.2981
## 2007-07-24  253.6991  258.3766  252.6082   256.0403
## 2007-07-25  257.5247  257.5446  251.8361   253.9282
## 2007-07-26  253.4201  255.3379  248.5085   253.0515
## 2007-07-27  253.3155  257.3454  251.8062   254.9892
## 2007-07-30  255.5023  258.7003  254.2968   257.0914
## 2007-07-31  259.1437  259.2483  254.0478   254.0478
## 2007-08-01  254.2968  257.2906  253.1212   255.5123
## 2007-08-02  255.9008  256.5334  253.5496   254.5509
## 2007-08-03  254.0727  255.6418  250.5608   250.5608
## 2007-08-06  250.5608  254.1225  250.3118   254.0478
## 2007-08-07  253.9232  258.9693  253.5696   257.0465
## 2007-08-08  258.7003  261.9083  257.5795   261.9083
## 2007-08-09  259.4276  262.4264  256.3541   256.4039
## 2007-08-10  254.1374  258.3915  251.8709   256.9120
## 2007-08-13  258.8000  258.9046  255.5571   256.7875
## 2007-08-14  256.8971  257.7339  253.0515   253.3504
## 2007-08-15  253.5496  254.8896  247.4276   247.8460
## 2007-08-16  245.0913  247.2881  239.3329   244.8423
## 2007-08-17  247.7912  249.5646  244.9070   249.0864
## 2007-08-20  250.2918  250.3417  247.0739   248.0303
## 2007-08-21  248.5384  253.1312  247.9556   252.3591
## 2007-08-22  254.0278  257.1611  253.6742   255.4176
## 2007-08-23  257.0366  257.1013  252.5534   255.1387
## 2007-08-24  255.3479  256.8124  253.3006   256.5384
## 2007-08-27  256.2545  257.7588  254.7451   255.6717
## 2007-08-28  254.8099  256.5285  251.9506   252.2545
## 2007-08-29  252.9718  255.6916  252.6679   255.4824
##            GOOG.Volume GOOG.Adjusted
## 2007-01-03    15470700      232.9220
## 2007-01-04    15834200      240.7277
## 2007-01-05    13795600      242.6853
## 2007-01-08     9544400      240.8871
## 2007-01-09    10803000      241.8435
## 2007-01-10    11981700      243.8161
## 2007-01-11    14470400      248.9270
## 2007-01-12     8980800      251.5571
## 2007-01-16    15194500      251.1984
## 2007-01-17    13448300      247.7115
## 2007-01-18    11908400      243.0042
## 2007-01-19     9993800      243.9606
## 2007-01-22    10849100      239.5222
## 2007-01-23     9365900      238.6306
## 2007-01-24    12164000      248.6032
## 2007-01-25    12784700      243.1337
## 2007-01-26    11034100      246.9942
## 2007-01-29     9587100      245.3155
## 2007-01-30     8392200      246.2370
## 2007-01-31    24503600      249.8136
## 2007-02-01    31434700      239.9755
## 2007-02-02    12620000      239.8510
## 2007-02-05    14467800      232.7077
## 2007-02-06    10683600      234.8597
## 2007-02-07     8270400      234.1274
## 2007-02-08     8183900      234.6355
## 2007-02-09     9753600      230.0826
## 2007-02-12    11552100      228.2893
## 2007-02-13     8155600      228.6928
## 2007-02-14    11440200      232.0950
## 2007-02-15     8115000      229.8734
## 2007-02-16    12400200      234.0926
## 2007-02-20     8165600      235.1685
## 2007-02-21    11323400      237.0415
## 2007-02-22    11530700      237.0365
## 2007-02-23     7794200      234.4313
## 2007-02-26     7969500      231.5969
## 2007-02-27    18695300      223.5471
## 2007-02-28    16124700      223.8858
## 2007-03-01    17435400      223.2781
## 2007-03-02    13216400      218.5209
## 2007-03-05    12757800      219.6517
## 2007-03-06    15123800      227.9207
## 2007-03-07    13117100      226.9693
## 2007-03-08    10765700      226.5110
## 2007-03-09     9992600      225.6343
## 2007-03-12     6956700      226.5259
## 2007-03-13    12802300      220.6878
## 2007-03-14    16093800      223.1635
## 2007-03-15     7917800      222.2619
## 2007-03-16    11360600      219.6019
## 2007-03-19    10434200      222.7800
## 2007-03-20     6868600      221.8086
## 2007-03-21    11639900      227.4226
## 2007-03-22    11403900      230.1573
## 2007-03-23     8253300      230.0527
## 2007-03-26     9455800      231.6318
## 2007-03-27     7510300      230.9444
## 2007-03-28     9217500      230.0776
## 2007-03-29     8006800      229.5994
## 2007-03-30     6785600      228.2246
## 2007-04-02     6922700      228.4089
## 2007-04-03    13052300      235.4176
## 2007-04-04     7585800      234.6306
## 2007-04-05     5451900      234.8746
## 2007-04-09     6147100      233.2308
## 2007-04-10     5980800      232.3790
## 2007-04-11     7652500      231.3977
## 2007-04-12     5436000      232.8223
## 2007-04-13     5610400      232.2744
## 2007-04-16    10193800      236.2495
## 2007-04-17     6444200      235.5172
## 2007-04-18    11383400      237.1162
## 2007-04-19    22101700      234.9444
## 2007-04-20    24414100      240.3392
## 2007-04-23    11391600      238.6455
## 2007-04-24     7417000      237.8734
## 2007-04-25     7963300      238.1025
## 2007-04-26     8280600      239.6916
## 2007-04-27     5873200      238.6106
## 2007-04-30     7309600      234.8099
## 2007-05-01     7343800      233.6243
## 2007-05-02     6148300      232.0203
## 2007-05-03     7215200      235.7314
## 2007-05-04     7929500      234.6804
## 2007-05-07     6062700      232.7625
## 2007-05-08     5831900      232.5334
## 2007-05-09     7808800      233.7489
## 2007-05-10     7400100      229.8734
## 2007-05-11     5910100      232.4985
## 2007-05-14     7774300      230.0278
## 2007-05-15     8268800      228.1449
## 2007-05-16    13157500      235.4226
## 2007-05-17     9356100      234.6007
## 2007-05-18     7419400      234.2819
## 2007-05-21    12364700      234.4213
## 2007-05-22     7706700      237.0415
## 2007-05-23    10158300      236.1000
## 2007-05-24     8378400      236.2794
## 2007-05-25    10736900      240.8572
## 2007-05-29    10475000      242.6455
## 2007-05-30    14545800      248.3690
## 2007-05-31    17915400      248.0253
## 2007-06-01     9633800      249.2657
## 2007-06-04    14255200      252.5882
## 2007-06-05    20972400      258.4513
## 2007-06-06    15832400      258.1573
## 2007-06-07    21340600      256.5683
## 2007-06-08    12764000      256.7825
## 2007-06-11     9330100      254.7153
## 2007-06-12    12887000      251.4425
## 2007-06-13    14120600      251.6767
## 2007-06-14     9277000      250.4811
## 2007-06-15    12394400      252.0004
## 2007-06-18     9707900      256.6381
## 2007-06-19     8743200      256.1947
## 2007-06-20     8708800      254.0328
## 2007-06-21     8852400      256.0951
## 2007-06-22    14461300      261.5098
## 2007-06-25    15909300      262.7253
## 2007-06-26    11421500      264.1400
## 2007-06-27    12292000      262.1624
## 2007-06-28     8368000      261.5247
## 2007-06-29     7790200      260.3741
## 2007-07-02     7001200      264.1997
## 2007-07-03     3757500      266.1723
## 2007-07-05     9922700      269.8037
## 2007-07-06     5514400      268.6929
## 2007-07-09     7487500      270.2670
## 2007-07-10     7740800      270.6555
## 2007-07-11     6643300      271.2184
## 2007-07-12     6908900      271.6468
## 2007-07-13    10513300      275.0490
## 2007-07-16    13248300      275.4625
## 2007-07-17     8689500      276.4637
## 2007-07-18    12205500      273.7240
## 2007-07-19    22337700      273.2707
## 2007-07-20    35677700      259.0889
## 2007-07-23    12761000      255.2981
## 2007-07-24    11185900      256.0403
## 2007-07-25    11131400      253.9282
## 2007-07-26    13818300      253.0515
## 2007-07-27    11059400      254.9892
## 2007-07-30     7956200      257.0914
## 2007-07-31     8572900      254.0478
## 2007-08-01     8889500      255.5123
## 2007-08-02     6333400      254.5509
## 2007-08-03     6376100      250.5608
## 2007-08-06     7330300      254.0478
## 2007-08-07     8560500      257.0465
## 2007-08-08     8168000      261.9083
## 2007-08-09     9729200      256.4039
## 2007-08-10    11794300      256.9120
## 2007-08-13     6382300      256.7875
## 2007-08-14     7294500      253.3504
## 2007-08-15    10859500      247.8460
## 2007-08-16    17355900      244.8423
## 2007-08-17    10999800      249.0864
## 2007-08-20     5414700      248.0303
## 2007-08-21     7248200      252.3591
## 2007-08-22     6529700      255.4176
## 2007-08-23     6176400      255.1387
## 2007-08-24     4963800      256.5384
## 2007-08-27     4667500      255.6717
## 2007-08-28     6572200      252.2545
## 2007-08-29     5117600      255.4824
##  [ reached getOption("max.print") -- omitted 3004 rows ]
```

---


```r
&gt; candleChart(AAPL, multi.col=TRUE, theme = 'white') 
```

&lt;img src="index_files/figure-html/quantmod-1.png" height="450" style="display: block; margin: auto;" /&gt;

---


```r
&gt; chartSeries(GOOG, theme = 'white')
```

&lt;img src="index_files/figure-html/quantmod2-1.png" height="450" style="display: block; margin: auto;" /&gt;

---

## xts オブジェクトのデータ

**`xts` = 時間インデックス + 数値データ（行列）**

- 時間インデックスは `index()` で取得する。
- 数値データは `coredata()` で取得する。

この形式のデータに対して種々の関数が定義されている。

例えば，さっきみた `candleChart` とか `chartSeries` とか，データの一部を取得する方法など

---

## coredata


```r
&gt; coredata(GOOG)
```

```
##         GOOG.Open GOOG.High  GOOG.Low GOOG.Close GOOG.Volume
##    [1,]  232.1299  237.4400  229.6940   232.9220    15470700
##    [2,]  233.6243  241.0714  233.3005   240.7277    15834200
##    [3,]  240.3491  242.8398  238.1623   242.6853    13795600
##    [4,]  242.9344  244.0204  240.1997   240.8871     9544400
##    [5,]  241.8186  243.2134  239.7015   241.8435    10803000
##    [6,]  241.3105  245.8535  240.1200   243.8161    11981700
##    [7,]  247.6717  249.9382  247.1636   248.9270    14470400
##    [8,]  250.0577  251.5571  249.0664   251.5571     8980800
##    [9,]  252.8273  255.5422  250.7103   251.1984    15194500
##   [10,]  250.7551  252.9369  246.2669   247.7115    13448300
##   [11,]  246.3367  247.3130  242.8049   243.0042    11908400
##   [12,]  243.0789  244.4637  242.4612   243.9606     9993800
##   [13,]  245.3304  245.4052  238.3566   239.5222    10849100
##   [14,]  239.4973  241.4699  237.7538   238.6306     9365900
##   [15,]  241.3205  248.8373  240.7426   248.6032    12164000
##   [16,]  249.5646  251.3080  241.9232   243.1337    12784700
##   [17,]  244.5484  248.0204  242.6057   246.9942    11034100
##   [18,]  248.0702  248.4438  244.3342   245.3155     9587100
##   [19,]  246.0776  248.0702  244.6928   246.2370     8392200
##   [20,]  247.3180  251.5571  246.8298   249.8136    24503600
##   [21,]  252.0552  252.0602  239.8659   239.9755    31434700
##   [22,]  240.4039  241.5945  238.0129   239.8510    12620000
##   [23,]  237.8584  238.1075  232.2246   232.7077    14467800
##   [24,]  233.1760  235.7663  232.7576   234.8597    10683600
##   [25,]  236.0253  236.2893  233.5147   234.1274     8270400
##   [26,]  233.1511  235.9904  231.7065   234.6355     8183900
##   [27,]  234.9444  235.4574  229.8883   230.0826     9753600
##   [28,]  229.4799  230.3317  226.6604   228.2893    11552100
##   [29,]  228.7177  230.5259  227.7762   228.6928     8155600
##   [30,]  229.1411  233.6891  228.7526   232.0950    11440200
##   [31,]  232.1299  232.1947  229.4998   229.8734     8115000
##   [32,]  230.5359  234.1972  230.1673   234.0926    12400200
##   [33,]  233.3603  235.4923  231.4873   235.1685     8165600
##   [34,]  234.0428  238.4462  232.9967   237.0415    11323400
##   [35,]  238.4512  241.2159  236.3092   237.0365    11530700
##   [36,]  236.9867  237.5845  233.0266   234.4313     7794200
##   [37,]  235.5322  236.7377  231.0091   231.5969     7969500
##   [38,]  226.6505  229.0415  222.7501   223.5471    18695300
##   [39,]  224.3640  225.9879  220.6928   223.8858    16124700
##   [40,]  220.5085  225.3653  219.1785   223.2781    17435400
##   [41,]  221.7239  223.5122  218.5209   218.5209    13216400
##   [42,]  217.6940  221.9182  217.6841   219.6517    12757800
##   [43,]  222.8995  228.6430  222.8547   227.9207    15123800
##   [44,]  230.4811  230.7053  226.2968   226.9693    13117100
##   [45,]  228.7526  231.8809  226.2021   226.5110    10765700
##   [46,]  228.1449  228.3441  224.2096   225.6343     9992600
##   [47,]  225.4400  226.7750  224.7127   226.5259     6956700
##   [48,]  224.2146  225.1212  220.5882   220.6878    12802300
##   [49,]  220.7874  223.4923  218.6803   223.1635    16093800
##   [50,]  223.0938  224.0701  221.1411   222.2619     7917800
##   [51,]  221.9929  222.5160  219.1237   219.6019    11360600
##   [52,]  220.7974  223.4126  219.4923   222.7800    10434200
##   [53,]  222.0627  222.9643  220.9717   221.8086     6868600
##   [54,]  221.8186  227.4325  221.7737   227.4226    11639900
##   [55,]  226.9543  230.2221  225.4201   230.1573    11403900
##   [56,]  229.8634  230.8298  227.6866   230.0527     8253300
##   [57,]  229.4151  231.6318  226.9593   231.6318     9455800
##   [58,]  230.9095  231.7464  229.3105   230.9444     7510300
##   [59,]  230.0726  231.8510  229.2158   230.0776     9217500
##   [60,]  231.4076  232.1299  226.6505   229.5994     8006800
##   [61,]  230.1872  230.8348  227.2183   228.2246     6785600
##   [62,]  228.0253  228.4089  225.2158   228.4089     6922700
##   [63,]  231.1586  236.2395  231.1337   235.4176    13052300
##   [64,]  235.1885  235.6169  233.9132   234.6306     7585800
##   [65,]  234.7700  235.1635  233.9332   234.8746     5451900
##   [66,]  235.6069  235.6169  231.9257   233.2308     6147100
##   [67,]  232.6729  234.5160  231.7115   232.3790     5980800
##   [68,]  232.1598  233.8236  230.4413   231.3977     7652500
##   [69,]  231.1337  233.1262  230.2569   232.8223     5436000
##   [70,]  233.3503  233.5097  230.8149   232.2744     5610400
##   [71,]  233.3553  237.6044  233.2009   236.2495    10193800
##   [72,]  236.0154  237.3055  234.9195   235.5172     6444200
##   [73,]  234.7501  239.0540  233.8883   237.1162    11383400
##   [74,]  236.3640  240.0751  233.9182   234.9444    22101700
##   [75,]  244.3441  245.3304  240.1100   240.3392    24414100
##   [76,]  239.1536  241.5945  238.2370   238.6455    11391600
##   [77,]  238.4114  239.0938  236.8871   237.8734     7417000
##   [78,]  239.1038  239.7862  237.1660   238.1025     7963300
##   [79,]  238.1573  241.3205  237.6642   239.6916     8280600
##   [80,]  239.1387  240.2993  238.2719   238.6106     5873200
##   [81,]  238.6804  239.7763  234.8099   234.8099     7309600
##   [82,]  235.2134  235.5222  231.2183   233.6243     7343800
##   [83,]  233.4500  234.6604  231.9954   232.0203     6148300
##   [84,]  232.2395  236.1499  231.7762   235.7314     7215200
##   [85,]  234.1822  236.5334  232.0701   234.6804     7929500
##   [86,]  235.1885  235.5272  232.3640   232.7625     6062700
##   [87,]  232.1947  233.2109  231.4973   232.5334     5831900
##   [88,]  232.2046  234.9842  231.0739   233.7489     7808800
##   [89,]  232.6480  233.8684  229.6492   229.8734     7400100
##   [90,]  230.0527  232.6281  229.6393   232.4985     5910100
##   [91,]  231.8709  232.8821  229.1411   230.0278     7774300
##   [92,]  230.1175  230.4064  227.8510   228.1449     8268800
##   [93,]  230.1374  235.6866  228.6530   235.4226    13157500
##   [94,]  235.3479  236.7227  234.5259   234.6007     9356100
##   [95,]  235.1337  235.4674  233.9979   234.2819     7419400
##   [96,]  233.8883  238.7053  232.4886   234.4213    12364700
##   [97,]  235.6169  238.6106  235.6169   237.0415     7706700
##   [98,]  239.5123  240.8024  235.9904   236.1000    10158300
##   [99,]  236.6878  238.7053  234.8696   236.2794     8378400
##  [100,]  238.9543  241.5695  237.7439   240.8572    10736900
##  [101,]  241.5945  244.9818  241.0963   242.6455    10475000
##  [102,]  241.3454  248.4886  240.5982   248.3690    14545800
##  [103,]  249.3454  253.4400  247.6019   248.0253    17915400
##  [104,]  249.5646  251.5671  248.0353   249.2657     9633800
##  [105,]  248.0253  254.3018  247.8659   252.5882    14255200
##  [106,]  253.9232  258.5310  252.3591   258.4513    20972400
##  [107,]  257.4102  259.4176  256.6679   258.1573    15832400
##  [108,]  258.9046  262.2670  255.2981   256.5683    21340600
##  [109,]  257.1362  258.8498  253.7788   256.7825    12764000
##  [110,]  256.0503  258.1573  254.0478   254.7153     9330100
##  [111,]  253.4052  254.8797  250.6455   251.4425    12887000
##  [112,]  252.5982  253.3205  248.4139   251.6767    14120600
##  [113,]  251.7464  251.9955  249.9133   250.4811     9277000
##  [114,]  253.1461  253.5496  249.6791   252.0004    12394400
##  [115,]  252.1449  257.0366  251.1785   256.6381     9707900
##  [116,]  256.0453  257.6592  254.8149   256.1947     8743200
##  [117,]  257.5148  258.4064  253.5795   254.0328     8708800
##  [118,]  254.5359  256.6829  252.1947   256.0951     8852400
##  [119,]  257.2458  261.5148  257.0864   261.5098    14461300
##  [120,]  263.5023  266.4961  260.7128   262.7253    15909300
##  [121,]  265.3703  265.6045  262.1375   264.1400    11421500
##  [122,]  261.5197  263.0092  258.8099   262.1624    12292000
##  [123,]  261.4600  263.7614  260.9220   261.5247     8368000
##  [124,]  262.0279  262.7153  258.7601   260.3741     7790200
##  [125,]  261.7639  264.9320  261.1212   264.1997     7001200
##  [126,]  264.5385  266.2022  262.7651   266.1723     3757500
##  [127,]  266.7800  271.1835  265.0814   269.8037     9922700
##  [128,]  269.6144  270.9195  268.3591   268.6929     5514400
##  [129,]  270.4861  273.3454  269.1213   270.2670     7487500
##  [130,]  270.8797  272.4787  269.8137   270.6555     7740800
##  [131,]  270.7900  272.2296  268.9967   271.2184     6643300
##  [132,]  271.9108  272.6381  269.1013   271.6468     6908900
##  [133,]  272.9320  275.3031  272.6032   275.0490    10513300
##  [134,]  274.1225  278.2471  273.6294   275.4625    13248300
##  [135,]  276.4837  277.8236  275.1586   276.4637     8689500
##  [136,]  275.9108  276.2147  270.8896   273.7240    12205500
##  [137,]  275.6966  275.7265  270.1076   273.2707    22337700
##  [138,]  254.9942  260.6132  253.7987   259.0889    35677700
##  [139,]  258.5360  259.0291  255.1188   255.2981    12761000
##  [140,]  253.6991  258.3766  252.6082   256.0403    11185900
##  [141,]  257.5247  257.5446  251.8361   253.9282    11131400
##  [142,]  253.4201  255.3379  248.5085   253.0515    13818300
##  [143,]  253.3155  257.3454  251.8062   254.9892    11059400
##  [144,]  255.5023  258.7003  254.2968   257.0914     7956200
##  [145,]  259.1437  259.2483  254.0478   254.0478     8572900
##  [146,]  254.2968  257.2906  253.1212   255.5123     8889500
##  [147,]  255.9008  256.5334  253.5496   254.5509     6333400
##  [148,]  254.0727  255.6418  250.5608   250.5608     6376100
##  [149,]  250.5608  254.1225  250.3118   254.0478     7330300
##  [150,]  253.9232  258.9693  253.5696   257.0465     8560500
##  [151,]  258.7003  261.9083  257.5795   261.9083     8168000
##  [152,]  259.4276  262.4264  256.3541   256.4039     9729200
##  [153,]  254.1374  258.3915  251.8709   256.9120    11794300
##  [154,]  258.8000  258.9046  255.5571   256.7875     6382300
##  [155,]  256.8971  257.7339  253.0515   253.3504     7294500
##  [156,]  253.5496  254.8896  247.4276   247.8460    10859500
##  [157,]  245.0913  247.2881  239.3329   244.8423    17355900
##  [158,]  247.7912  249.5646  244.9070   249.0864    10999800
##  [159,]  250.2918  250.3417  247.0739   248.0303     5414700
##  [160,]  248.5384  253.1312  247.9556   252.3591     7248200
##  [161,]  254.0278  257.1611  253.6742   255.4176     6529700
##  [162,]  257.0366  257.1013  252.5534   255.1387     6176400
##  [163,]  255.3479  256.8124  253.3006   256.5384     4963800
##  [164,]  256.2545  257.7588  254.7451   255.6717     4667500
##  [165,]  254.8099  256.5285  251.9506   252.2545     6572200
##  [166,]  252.9718  255.6916  252.6679   255.4824     5117600
##         GOOG.Adjusted
##    [1,]      232.9220
##    [2,]      240.7277
##    [3,]      242.6853
##    [4,]      240.8871
##    [5,]      241.8435
##    [6,]      243.8161
##    [7,]      248.9270
##    [8,]      251.5571
##    [9,]      251.1984
##   [10,]      247.7115
##   [11,]      243.0042
##   [12,]      243.9606
##   [13,]      239.5222
##   [14,]      238.6306
##   [15,]      248.6032
##   [16,]      243.1337
##   [17,]      246.9942
##   [18,]      245.3155
##   [19,]      246.2370
##   [20,]      249.8136
##   [21,]      239.9755
##   [22,]      239.8510
##   [23,]      232.7077
##   [24,]      234.8597
##   [25,]      234.1274
##   [26,]      234.6355
##   [27,]      230.0826
##   [28,]      228.2893
##   [29,]      228.6928
##   [30,]      232.0950
##   [31,]      229.8734
##   [32,]      234.0926
##   [33,]      235.1685
##   [34,]      237.0415
##   [35,]      237.0365
##   [36,]      234.4313
##   [37,]      231.5969
##   [38,]      223.5471
##   [39,]      223.8858
##   [40,]      223.2781
##   [41,]      218.5209
##   [42,]      219.6517
##   [43,]      227.9207
##   [44,]      226.9693
##   [45,]      226.5110
##   [46,]      225.6343
##   [47,]      226.5259
##   [48,]      220.6878
##   [49,]      223.1635
##   [50,]      222.2619
##   [51,]      219.6019
##   [52,]      222.7800
##   [53,]      221.8086
##   [54,]      227.4226
##   [55,]      230.1573
##   [56,]      230.0527
##   [57,]      231.6318
##   [58,]      230.9444
##   [59,]      230.0776
##   [60,]      229.5994
##   [61,]      228.2246
##   [62,]      228.4089
##   [63,]      235.4176
##   [64,]      234.6306
##   [65,]      234.8746
##   [66,]      233.2308
##   [67,]      232.3790
##   [68,]      231.3977
##   [69,]      232.8223
##   [70,]      232.2744
##   [71,]      236.2495
##   [72,]      235.5172
##   [73,]      237.1162
##   [74,]      234.9444
##   [75,]      240.3392
##   [76,]      238.6455
##   [77,]      237.8734
##   [78,]      238.1025
##   [79,]      239.6916
##   [80,]      238.6106
##   [81,]      234.8099
##   [82,]      233.6243
##   [83,]      232.0203
##   [84,]      235.7314
##   [85,]      234.6804
##   [86,]      232.7625
##   [87,]      232.5334
##   [88,]      233.7489
##   [89,]      229.8734
##   [90,]      232.4985
##   [91,]      230.0278
##   [92,]      228.1449
##   [93,]      235.4226
##   [94,]      234.6007
##   [95,]      234.2819
##   [96,]      234.4213
##   [97,]      237.0415
##   [98,]      236.1000
##   [99,]      236.2794
##  [100,]      240.8572
##  [101,]      242.6455
##  [102,]      248.3690
##  [103,]      248.0253
##  [104,]      249.2657
##  [105,]      252.5882
##  [106,]      258.4513
##  [107,]      258.1573
##  [108,]      256.5683
##  [109,]      256.7825
##  [110,]      254.7153
##  [111,]      251.4425
##  [112,]      251.6767
##  [113,]      250.4811
##  [114,]      252.0004
##  [115,]      256.6381
##  [116,]      256.1947
##  [117,]      254.0328
##  [118,]      256.0951
##  [119,]      261.5098
##  [120,]      262.7253
##  [121,]      264.1400
##  [122,]      262.1624
##  [123,]      261.5247
##  [124,]      260.3741
##  [125,]      264.1997
##  [126,]      266.1723
##  [127,]      269.8037
##  [128,]      268.6929
##  [129,]      270.2670
##  [130,]      270.6555
##  [131,]      271.2184
##  [132,]      271.6468
##  [133,]      275.0490
##  [134,]      275.4625
##  [135,]      276.4637
##  [136,]      273.7240
##  [137,]      273.2707
##  [138,]      259.0889
##  [139,]      255.2981
##  [140,]      256.0403
##  [141,]      253.9282
##  [142,]      253.0515
##  [143,]      254.9892
##  [144,]      257.0914
##  [145,]      254.0478
##  [146,]      255.5123
##  [147,]      254.5509
##  [148,]      250.5608
##  [149,]      254.0478
##  [150,]      257.0465
##  [151,]      261.9083
##  [152,]      256.4039
##  [153,]      256.9120
##  [154,]      256.7875
##  [155,]      253.3504
##  [156,]      247.8460
##  [157,]      244.8423
##  [158,]      249.0864
##  [159,]      248.0303
##  [160,]      252.3591
##  [161,]      255.4176
##  [162,]      255.1387
##  [163,]      256.5384
##  [164,]      255.6717
##  [165,]      252.2545
##  [166,]      255.4824
##  [ reached getOption("max.print") -- omitted 3004 rows ]
```

---

## index


```r
&gt; index(GOOG)
```

```
##    [1] "2007-01-03" "2007-01-04" "2007-01-05" "2007-01-08"
##    [5] "2007-01-09" "2007-01-10" "2007-01-11" "2007-01-12"
##    [9] "2007-01-16" "2007-01-17" "2007-01-18" "2007-01-19"
##   [13] "2007-01-22" "2007-01-23" "2007-01-24" "2007-01-25"
##   [17] "2007-01-26" "2007-01-29" "2007-01-30" "2007-01-31"
##   [21] "2007-02-01" "2007-02-02" "2007-02-05" "2007-02-06"
##   [25] "2007-02-07" "2007-02-08" "2007-02-09" "2007-02-12"
##   [29] "2007-02-13" "2007-02-14" "2007-02-15" "2007-02-16"
##   [33] "2007-02-20" "2007-02-21" "2007-02-22" "2007-02-23"
##   [37] "2007-02-26" "2007-02-27" "2007-02-28" "2007-03-01"
##   [41] "2007-03-02" "2007-03-05" "2007-03-06" "2007-03-07"
##   [45] "2007-03-08" "2007-03-09" "2007-03-12" "2007-03-13"
##   [49] "2007-03-14" "2007-03-15" "2007-03-16" "2007-03-19"
##   [53] "2007-03-20" "2007-03-21" "2007-03-22" "2007-03-23"
##   [57] "2007-03-26" "2007-03-27" "2007-03-28" "2007-03-29"
##   [61] "2007-03-30" "2007-04-02" "2007-04-03" "2007-04-04"
##   [65] "2007-04-05" "2007-04-09" "2007-04-10" "2007-04-11"
##   [69] "2007-04-12" "2007-04-13" "2007-04-16" "2007-04-17"
##   [73] "2007-04-18" "2007-04-19" "2007-04-20" "2007-04-23"
##   [77] "2007-04-24" "2007-04-25" "2007-04-26" "2007-04-27"
##   [81] "2007-04-30" "2007-05-01" "2007-05-02" "2007-05-03"
##   [85] "2007-05-04" "2007-05-07" "2007-05-08" "2007-05-09"
##   [89] "2007-05-10" "2007-05-11" "2007-05-14" "2007-05-15"
##   [93] "2007-05-16" "2007-05-17" "2007-05-18" "2007-05-21"
##   [97] "2007-05-22" "2007-05-23" "2007-05-24" "2007-05-25"
##  [101] "2007-05-29" "2007-05-30" "2007-05-31" "2007-06-01"
##  [105] "2007-06-04" "2007-06-05" "2007-06-06" "2007-06-07"
##  [109] "2007-06-08" "2007-06-11" "2007-06-12" "2007-06-13"
##  [113] "2007-06-14" "2007-06-15" "2007-06-18" "2007-06-19"
##  [117] "2007-06-20" "2007-06-21" "2007-06-22" "2007-06-25"
##  [121] "2007-06-26" "2007-06-27" "2007-06-28" "2007-06-29"
##  [125] "2007-07-02" "2007-07-03" "2007-07-05" "2007-07-06"
##  [129] "2007-07-09" "2007-07-10" "2007-07-11" "2007-07-12"
##  [133] "2007-07-13" "2007-07-16" "2007-07-17" "2007-07-18"
##  [137] "2007-07-19" "2007-07-20" "2007-07-23" "2007-07-24"
##  [141] "2007-07-25" "2007-07-26" "2007-07-27" "2007-07-30"
##  [145] "2007-07-31" "2007-08-01" "2007-08-02" "2007-08-03"
##  [149] "2007-08-06" "2007-08-07" "2007-08-08" "2007-08-09"
##  [153] "2007-08-10" "2007-08-13" "2007-08-14" "2007-08-15"
##  [157] "2007-08-16" "2007-08-17" "2007-08-20" "2007-08-21"
##  [161] "2007-08-22" "2007-08-23" "2007-08-24" "2007-08-27"
##  [165] "2007-08-28" "2007-08-29" "2007-08-30" "2007-08-31"
##  [169] "2007-09-04" "2007-09-05" "2007-09-06" "2007-09-07"
##  [173] "2007-09-10" "2007-09-11" "2007-09-12" "2007-09-13"
##  [177] "2007-09-14" "2007-09-17" "2007-09-18" "2007-09-19"
##  [181] "2007-09-20" "2007-09-21" "2007-09-24" "2007-09-25"
##  [185] "2007-09-26" "2007-09-27" "2007-09-28" "2007-10-01"
##  [189] "2007-10-02" "2007-10-03" "2007-10-04" "2007-10-05"
##  [193] "2007-10-08" "2007-10-09" "2007-10-10" "2007-10-11"
##  [197] "2007-10-12" "2007-10-15" "2007-10-16" "2007-10-17"
##  [201] "2007-10-18" "2007-10-19" "2007-10-22" "2007-10-23"
##  [205] "2007-10-24" "2007-10-25" "2007-10-26" "2007-10-29"
##  [209] "2007-10-30" "2007-10-31" "2007-11-01" "2007-11-02"
##  [213] "2007-11-05" "2007-11-06" "2007-11-07" "2007-11-08"
##  [217] "2007-11-09" "2007-11-12" "2007-11-13" "2007-11-14"
##  [221] "2007-11-15" "2007-11-16" "2007-11-19" "2007-11-20"
##  [225] "2007-11-21" "2007-11-23" "2007-11-26" "2007-11-27"
##  [229] "2007-11-28" "2007-11-29" "2007-11-30" "2007-12-03"
##  [233] "2007-12-04" "2007-12-05" "2007-12-06" "2007-12-07"
##  [237] "2007-12-10" "2007-12-11" "2007-12-12" "2007-12-13"
##  [241] "2007-12-14" "2007-12-17" "2007-12-18" "2007-12-19"
##  [245] "2007-12-20" "2007-12-21" "2007-12-24" "2007-12-26"
##  [249] "2007-12-27" "2007-12-28" "2007-12-31" "2008-01-02"
##  [253] "2008-01-03" "2008-01-04" "2008-01-07" "2008-01-08"
##  [257] "2008-01-09" "2008-01-10" "2008-01-11" "2008-01-14"
##  [261] "2008-01-15" "2008-01-16" "2008-01-17" "2008-01-18"
##  [265] "2008-01-22" "2008-01-23" "2008-01-24" "2008-01-25"
##  [269] "2008-01-28" "2008-01-29" "2008-01-30" "2008-01-31"
##  [273] "2008-02-01" "2008-02-04" "2008-02-05" "2008-02-06"
##  [277] "2008-02-07" "2008-02-08" "2008-02-11" "2008-02-12"
##  [281] "2008-02-13" "2008-02-14" "2008-02-15" "2008-02-19"
##  [285] "2008-02-20" "2008-02-21" "2008-02-22" "2008-02-25"
##  [289] "2008-02-26" "2008-02-27" "2008-02-28" "2008-02-29"
##  [293] "2008-03-03" "2008-03-04" "2008-03-05" "2008-03-06"
##  [297] "2008-03-07" "2008-03-10" "2008-03-11" "2008-03-12"
##  [301] "2008-03-13" "2008-03-14" "2008-03-17" "2008-03-18"
##  [305] "2008-03-19" "2008-03-20" "2008-03-24" "2008-03-25"
##  [309] "2008-03-26" "2008-03-27" "2008-03-28" "2008-03-31"
##  [313] "2008-04-01" "2008-04-02" "2008-04-03" "2008-04-04"
##  [317] "2008-04-07" "2008-04-08" "2008-04-09" "2008-04-10"
##  [321] "2008-04-11" "2008-04-14" "2008-04-15" "2008-04-16"
##  [325] "2008-04-17" "2008-04-18" "2008-04-21" "2008-04-22"
##  [329] "2008-04-23" "2008-04-24" "2008-04-25" "2008-04-28"
##  [333] "2008-04-29" "2008-04-30" "2008-05-01" "2008-05-02"
##  [337] "2008-05-05" "2008-05-06" "2008-05-07" "2008-05-08"
##  [341] "2008-05-09" "2008-05-12" "2008-05-13" "2008-05-14"
##  [345] "2008-05-15" "2008-05-16" "2008-05-19" "2008-05-20"
##  [349] "2008-05-21" "2008-05-22" "2008-05-23" "2008-05-27"
##  [353] "2008-05-28" "2008-05-29" "2008-05-30" "2008-06-02"
##  [357] "2008-06-03" "2008-06-04" "2008-06-05" "2008-06-06"
##  [361] "2008-06-09" "2008-06-10" "2008-06-11" "2008-06-12"
##  [365] "2008-06-13" "2008-06-16" "2008-06-17" "2008-06-18"
##  [369] "2008-06-19" "2008-06-20" "2008-06-23" "2008-06-24"
##  [373] "2008-06-25" "2008-06-26" "2008-06-27" "2008-06-30"
##  [377] "2008-07-01" "2008-07-02" "2008-07-03" "2008-07-07"
##  [381] "2008-07-08" "2008-07-09" "2008-07-10" "2008-07-11"
##  [385] "2008-07-14" "2008-07-15" "2008-07-16" "2008-07-17"
##  [389] "2008-07-18" "2008-07-21" "2008-07-22" "2008-07-23"
##  [393] "2008-07-24" "2008-07-25" "2008-07-28" "2008-07-29"
##  [397] "2008-07-30" "2008-07-31" "2008-08-01" "2008-08-04"
##  [401] "2008-08-05" "2008-08-06" "2008-08-07" "2008-08-08"
##  [405] "2008-08-11" "2008-08-12" "2008-08-13" "2008-08-14"
##  [409] "2008-08-15" "2008-08-18" "2008-08-19" "2008-08-20"
##  [413] "2008-08-21" "2008-08-22" "2008-08-25" "2008-08-26"
##  [417] "2008-08-27" "2008-08-28" "2008-08-29" "2008-09-02"
##  [421] "2008-09-03" "2008-09-04" "2008-09-05" "2008-09-08"
##  [425] "2008-09-09" "2008-09-10" "2008-09-11" "2008-09-12"
##  [429] "2008-09-15" "2008-09-16" "2008-09-17" "2008-09-18"
##  [433] "2008-09-19" "2008-09-22" "2008-09-23" "2008-09-24"
##  [437] "2008-09-25" "2008-09-26" "2008-09-29" "2008-09-30"
##  [441] "2008-10-01" "2008-10-02" "2008-10-03" "2008-10-06"
##  [445] "2008-10-07" "2008-10-08" "2008-10-09" "2008-10-10"
##  [449] "2008-10-13" "2008-10-14" "2008-10-15" "2008-10-16"
##  [453] "2008-10-17" "2008-10-20" "2008-10-21" "2008-10-22"
##  [457] "2008-10-23" "2008-10-24" "2008-10-27" "2008-10-28"
##  [461] "2008-10-29" "2008-10-30" "2008-10-31" "2008-11-03"
##  [465] "2008-11-04" "2008-11-05" "2008-11-06" "2008-11-07"
##  [469] "2008-11-10" "2008-11-11" "2008-11-12" "2008-11-13"
##  [473] "2008-11-14" "2008-11-17" "2008-11-18" "2008-11-19"
##  [477] "2008-11-20" "2008-11-21" "2008-11-24" "2008-11-25"
##  [481] "2008-11-26" "2008-11-28" "2008-12-01" "2008-12-02"
##  [485] "2008-12-03" "2008-12-04" "2008-12-05" "2008-12-08"
##  [489] "2008-12-09" "2008-12-10" "2008-12-11" "2008-12-12"
##  [493] "2008-12-15" "2008-12-16" "2008-12-17" "2008-12-18"
##  [497] "2008-12-19" "2008-12-22" "2008-12-23" "2008-12-24"
##  [501] "2008-12-26" "2008-12-29" "2008-12-30" "2008-12-31"
##  [505] "2009-01-02" "2009-01-05" "2009-01-06" "2009-01-07"
##  [509] "2009-01-08" "2009-01-09" "2009-01-12" "2009-01-13"
##  [513] "2009-01-14" "2009-01-15" "2009-01-16" "2009-01-20"
##  [517] "2009-01-21" "2009-01-22" "2009-01-23" "2009-01-26"
##  [521] "2009-01-27" "2009-01-28" "2009-01-29" "2009-01-30"
##  [525] "2009-02-02" "2009-02-03" "2009-02-04" "2009-02-05"
##  [529] "2009-02-06" "2009-02-09" "2009-02-10" "2009-02-11"
##  [533] "2009-02-12" "2009-02-13" "2009-02-17" "2009-02-18"
##  [537] "2009-02-19" "2009-02-20" "2009-02-23" "2009-02-24"
##  [541] "2009-02-25" "2009-02-26" "2009-02-27" "2009-03-02"
##  [545] "2009-03-03" "2009-03-04" "2009-03-05" "2009-03-06"
##  [549] "2009-03-09" "2009-03-10" "2009-03-11" "2009-03-12"
##  [553] "2009-03-13" "2009-03-16" "2009-03-17" "2009-03-18"
##  [557] "2009-03-19" "2009-03-20" "2009-03-23" "2009-03-24"
##  [561] "2009-03-25" "2009-03-26" "2009-03-27" "2009-03-30"
##  [565] "2009-03-31" "2009-04-01" "2009-04-02" "2009-04-03"
##  [569] "2009-04-06" "2009-04-07" "2009-04-08" "2009-04-09"
##  [573] "2009-04-13" "2009-04-14" "2009-04-15" "2009-04-16"
##  [577] "2009-04-17" "2009-04-20" "2009-04-21" "2009-04-22"
##  [581] "2009-04-23" "2009-04-24" "2009-04-27" "2009-04-28"
##  [585] "2009-04-29" "2009-04-30" "2009-05-01" "2009-05-04"
##  [589] "2009-05-05" "2009-05-06" "2009-05-07" "2009-05-08"
##  [593] "2009-05-11" "2009-05-12" "2009-05-13" "2009-05-14"
##  [597] "2009-05-15" "2009-05-18" "2009-05-19" "2009-05-20"
##  [601] "2009-05-21" "2009-05-22" "2009-05-26" "2009-05-27"
##  [605] "2009-05-28" "2009-05-29" "2009-06-01" "2009-06-02"
##  [609] "2009-06-03" "2009-06-04" "2009-06-05" "2009-06-08"
##  [613] "2009-06-09" "2009-06-10" "2009-06-11" "2009-06-12"
##  [617] "2009-06-15" "2009-06-16" "2009-06-17" "2009-06-18"
##  [621] "2009-06-19" "2009-06-22" "2009-06-23" "2009-06-24"
##  [625] "2009-06-25" "2009-06-26" "2009-06-29" "2009-06-30"
##  [629] "2009-07-01" "2009-07-02" "2009-07-06" "2009-07-07"
##  [633] "2009-07-08" "2009-07-09" "2009-07-10" "2009-07-13"
##  [637] "2009-07-14" "2009-07-15" "2009-07-16" "2009-07-17"
##  [641] "2009-07-20" "2009-07-21" "2009-07-22" "2009-07-23"
##  [645] "2009-07-24" "2009-07-27" "2009-07-28" "2009-07-29"
##  [649] "2009-07-30" "2009-07-31" "2009-08-03" "2009-08-04"
##  [653] "2009-08-05" "2009-08-06" "2009-08-07" "2009-08-10"
##  [657] "2009-08-11" "2009-08-12" "2009-08-13" "2009-08-14"
##  [661] "2009-08-17" "2009-08-18" "2009-08-19" "2009-08-20"
##  [665] "2009-08-21" "2009-08-24" "2009-08-25" "2009-08-26"
##  [669] "2009-08-27" "2009-08-28" "2009-08-31" "2009-09-01"
##  [673] "2009-09-02" "2009-09-03" "2009-09-04" "2009-09-08"
##  [677] "2009-09-09" "2009-09-10" "2009-09-11" "2009-09-14"
##  [681] "2009-09-15" "2009-09-16" "2009-09-17" "2009-09-18"
##  [685] "2009-09-21" "2009-09-22" "2009-09-23" "2009-09-24"
##  [689] "2009-09-25" "2009-09-28" "2009-09-29" "2009-09-30"
##  [693] "2009-10-01" "2009-10-02" "2009-10-05" "2009-10-06"
##  [697] "2009-10-07" "2009-10-08" "2009-10-09" "2009-10-12"
##  [701] "2009-10-13" "2009-10-14" "2009-10-15" "2009-10-16"
##  [705] "2009-10-19" "2009-10-20" "2009-10-21" "2009-10-22"
##  [709] "2009-10-23" "2009-10-26" "2009-10-27" "2009-10-28"
##  [713] "2009-10-29" "2009-10-30" "2009-11-02" "2009-11-03"
##  [717] "2009-11-04" "2009-11-05" "2009-11-06" "2009-11-09"
##  [721] "2009-11-10" "2009-11-11" "2009-11-12" "2009-11-13"
##  [725] "2009-11-16" "2009-11-17" "2009-11-18" "2009-11-19"
##  [729] "2009-11-20" "2009-11-23" "2009-11-24" "2009-11-25"
##  [733] "2009-11-27" "2009-11-30" "2009-12-01" "2009-12-02"
##  [737] "2009-12-03" "2009-12-04" "2009-12-07" "2009-12-08"
##  [741] "2009-12-09" "2009-12-10" "2009-12-11" "2009-12-14"
##  [745] "2009-12-15" "2009-12-16" "2009-12-17" "2009-12-18"
##  [749] "2009-12-21" "2009-12-22" "2009-12-23" "2009-12-24"
##  [753] "2009-12-28" "2009-12-29" "2009-12-30" "2009-12-31"
##  [757] "2010-01-04" "2010-01-05" "2010-01-06" "2010-01-07"
##  [761] "2010-01-08" "2010-01-11" "2010-01-12" "2010-01-13"
##  [765] "2010-01-14" "2010-01-15" "2010-01-19" "2010-01-20"
##  [769] "2010-01-21" "2010-01-22" "2010-01-25" "2010-01-26"
##  [773] "2010-01-27" "2010-01-28" "2010-01-29" "2010-02-01"
##  [777] "2010-02-02" "2010-02-03" "2010-02-04" "2010-02-05"
##  [781] "2010-02-08" "2010-02-09" "2010-02-10" "2010-02-11"
##  [785] "2010-02-12" "2010-02-16" "2010-02-17" "2010-02-18"
##  [789] "2010-02-19" "2010-02-22" "2010-02-23" "2010-02-24"
##  [793] "2010-02-25" "2010-02-26" "2010-03-01" "2010-03-02"
##  [797] "2010-03-03" "2010-03-04" "2010-03-05" "2010-03-08"
##  [801] "2010-03-09" "2010-03-10" "2010-03-11" "2010-03-12"
##  [805] "2010-03-15" "2010-03-16" "2010-03-17" "2010-03-18"
##  [809] "2010-03-19" "2010-03-22" "2010-03-23" "2010-03-24"
##  [813] "2010-03-25" "2010-03-26" "2010-03-29" "2010-03-30"
##  [817] "2010-03-31" "2010-04-01" "2010-04-05" "2010-04-06"
##  [821] "2010-04-07" "2010-04-08" "2010-04-09" "2010-04-12"
##  [825] "2010-04-13" "2010-04-14" "2010-04-15" "2010-04-16"
##  [829] "2010-04-19" "2010-04-20" "2010-04-21" "2010-04-22"
##  [833] "2010-04-23" "2010-04-26" "2010-04-27" "2010-04-28"
##  [837] "2010-04-29" "2010-04-30" "2010-05-03" "2010-05-04"
##  [841] "2010-05-05" "2010-05-06" "2010-05-07" "2010-05-10"
##  [845] "2010-05-11" "2010-05-12" "2010-05-13" "2010-05-14"
##  [849] "2010-05-17" "2010-05-18" "2010-05-19" "2010-05-20"
##  [853] "2010-05-21" "2010-05-24" "2010-05-25" "2010-05-26"
##  [857] "2010-05-27" "2010-05-28" "2010-06-01" "2010-06-02"
##  [861] "2010-06-03" "2010-06-04" "2010-06-07" "2010-06-08"
##  [865] "2010-06-09" "2010-06-10" "2010-06-11" "2010-06-14"
##  [869] "2010-06-15" "2010-06-16" "2010-06-17" "2010-06-18"
##  [873] "2010-06-21" "2010-06-22" "2010-06-23" "2010-06-24"
##  [877] "2010-06-25" "2010-06-28" "2010-06-29" "2010-06-30"
##  [881] "2010-07-01" "2010-07-02" "2010-07-06" "2010-07-07"
##  [885] "2010-07-08" "2010-07-09" "2010-07-12" "2010-07-13"
##  [889] "2010-07-14" "2010-07-15" "2010-07-16" "2010-07-19"
##  [893] "2010-07-20" "2010-07-21" "2010-07-22" "2010-07-23"
##  [897] "2010-07-26" "2010-07-27" "2010-07-28" "2010-07-29"
##  [901] "2010-07-30" "2010-08-02" "2010-08-03" "2010-08-04"
##  [905] "2010-08-05" "2010-08-06" "2010-08-09" "2010-08-10"
##  [909] "2010-08-11" "2010-08-12" "2010-08-13" "2010-08-16"
##  [913] "2010-08-17" "2010-08-18" "2010-08-19" "2010-08-20"
##  [917] "2010-08-23" "2010-08-24" "2010-08-25" "2010-08-26"
##  [921] "2010-08-27" "2010-08-30" "2010-08-31" "2010-09-01"
##  [925] "2010-09-02" "2010-09-03" "2010-09-07" "2010-09-08"
##  [929] "2010-09-09" "2010-09-10" "2010-09-13" "2010-09-14"
##  [933] "2010-09-15" "2010-09-16" "2010-09-17" "2010-09-20"
##  [937] "2010-09-21" "2010-09-22" "2010-09-23" "2010-09-24"
##  [941] "2010-09-27" "2010-09-28" "2010-09-29" "2010-09-30"
##  [945] "2010-10-01" "2010-10-04" "2010-10-05" "2010-10-06"
##  [949] "2010-10-07" "2010-10-08" "2010-10-11" "2010-10-12"
##  [953] "2010-10-13" "2010-10-14" "2010-10-15" "2010-10-18"
##  [957] "2010-10-19" "2010-10-20" "2010-10-21" "2010-10-22"
##  [961] "2010-10-25" "2010-10-26" "2010-10-27" "2010-10-28"
##  [965] "2010-10-29" "2010-11-01" "2010-11-02" "2010-11-03"
##  [969] "2010-11-04" "2010-11-05" "2010-11-08" "2010-11-09"
##  [973] "2010-11-10" "2010-11-11" "2010-11-12" "2010-11-15"
##  [977] "2010-11-16" "2010-11-17" "2010-11-18" "2010-11-19"
##  [981] "2010-11-22" "2010-11-23" "2010-11-24" "2010-11-26"
##  [985] "2010-11-29" "2010-11-30" "2010-12-01" "2010-12-02"
##  [989] "2010-12-03" "2010-12-06" "2010-12-07" "2010-12-08"
##  [993] "2010-12-09" "2010-12-10" "2010-12-13" "2010-12-14"
##  [997] "2010-12-15" "2010-12-16" "2010-12-17" "2010-12-20"
##  [ reached 'max' / getOption("max.print") -- omitted 2170 entries ]
```

---



```r
&gt; GOOG["2019-07-31"] # 1日
```

```
##            GOOG.Open GOOG.High GOOG.Low GOOG.Close GOOG.Volume
## 2019-07-31      1223      1234 1207.764    1216.68     1725500
##            GOOG.Adjusted
## 2019-07-31       1216.68
```



```r
&gt; GOOG["2019-07-21/31"] # 期間
```

```
##            GOOG.Open GOOG.High GOOG.Low GOOG.Close GOOG.Volume
## 2019-07-22   1133.45   1139.25 1124.240    1138.07     1301500
## 2019-07-23   1144.00   1146.90 1131.800    1146.21     1093700
## 2019-07-24   1131.90   1144.00 1126.990    1137.81     1589800
## 2019-07-25   1137.82   1141.70 1120.920    1132.12     2209800
## 2019-07-26   1224.04   1265.55 1224.000    1250.41     4805800
## 2019-07-29   1241.05   1247.37 1228.230    1239.41     2223700
## 2019-07-30   1225.41   1234.87 1223.300    1225.14     1453300
## 2019-07-31   1223.00   1234.00 1207.764    1216.68     1725500
##            GOOG.Adjusted
## 2019-07-22       1138.07
## 2019-07-23       1146.21
## 2019-07-24       1137.81
## 2019-07-25       1132.12
## 2019-07-26       1250.41
## 2019-07-29       1239.41
## 2019-07-30       1225.14
## 2019-07-31       1216.68
```

---


```r
&gt; last(GOOG, '10 days')
```

```
##            GOOG.Open GOOG.High GOOG.Low GOOG.Close GOOG.Volume
## 2019-07-24   1131.90  1144.000 1126.990    1137.81     1589800
## 2019-07-25   1137.82  1141.700 1120.920    1132.12     2209800
## 2019-07-26   1224.04  1265.550 1224.000    1250.41     4805800
## 2019-07-29   1241.05  1247.370 1228.230    1239.41     2223700
## 2019-07-30   1225.41  1234.870 1223.300    1225.14     1453300
## 2019-07-31   1223.00  1234.000 1207.764    1216.68     1725500
## 2019-08-01   1214.03  1234.110 1205.720    1209.01     1698500
## 2019-08-02   1200.74  1206.900 1188.940    1193.99     1645100
## 2019-08-05   1170.04  1175.240 1140.140    1152.32     2532600
## 2019-08-06   1163.31  1179.625 1160.040    1169.95     1381313
##            GOOG.Adjusted
## 2019-07-24       1137.81
## 2019-07-25       1132.12
## 2019-07-26       1250.41
## 2019-07-29       1239.41
## 2019-07-30       1225.14
## 2019-07-31       1216.68
## 2019-08-01       1209.01
## 2019-08-02       1193.99
## 2019-08-05       1152.32
## 2019-08-06       1169.95
```


---


```r
dates &lt;- seq(as.Date("2019-05-01"), 
             as.Date("2019-05-30"), by = 2)
GOOG[dates]
```

```
##            GOOG.Open GOOG.High GOOG.Low GOOG.Close GOOG.Volume
## 2019-05-01   1188.05  1188.050 1167.180    1168.08     2639200
## 2019-05-03   1173.65  1186.800 1169.000    1185.40     1980700
## 2019-05-07   1180.47  1190.440 1161.040    1174.10     1551400
## 2019-05-09   1159.03  1169.660 1150.850    1162.38     1185700
## 2019-05-13   1141.96  1147.940 1122.110    1132.03     1860600
## 2019-05-15   1117.87  1171.330 1116.666    1164.21     2289300
## 2019-05-17   1168.47  1180.150 1160.010    1162.30     1208600
## 2019-05-21   1148.49  1152.708 1137.940    1149.63     1159800
## 2019-05-23   1140.50  1145.973 1129.224    1140.77     1198900
## 2019-05-29   1127.52  1129.100 1108.220    1116.46     1538200
##            GOOG.Adjusted
## 2019-05-01       1168.08
## 2019-05-03       1185.40
## 2019-05-07       1174.10
## 2019-05-09       1162.38
## 2019-05-13       1132.03
## 2019-05-15       1164.21
## 2019-05-17       1162.30
## 2019-05-21       1149.63
## 2019-05-23       1140.77
## 2019-05-29       1116.46
```


---

## 移動平均


```r
&gt; GOOG2018 &lt;- GOOG$GOOG.Open["2018"]
&gt; MA &lt;- rollmean(GOOG2018, 20)
&gt; MA_GOOG &lt;- merge(GOOG2018, MA)
&gt; plot(MA_GOOG)
```

&lt;img src="index_files/figure-html/googma-1.png" height="380" style="display: block; margin: auto;" /&gt;

---

class: section

## 時間のデータ


---

## 日付データ

文字列と時間のデータを区別する。


```r
&gt; a &lt;- "2018-05-10"
&gt; b &lt;- "2018-06-30"
&gt; b - a
```

```
## Error in b - a: non-numeric argument to binary operator
```


```r
&gt; a &lt;- as.Date(a)
&gt; b &lt;- as.Date(b)
&gt; a
```

```
## [1] "2018-05-10"
```


```r
&gt; b - a
```

```
## Time difference of 51 days
```

---

## as.Date


```r
&gt; as.Date("2019-07-10")
```

```
## [1] "2019-07-10"
```

```r
&gt; as.Date(c("2018/7/10", "2018/7/15"))
```

```
## [1] "2018-07-10" "2018-07-15"
```

```r
&gt; as.Date("10/07/2019", tryFormats = "%d/%m/%Y")
```

```
## [1] "2019-07-10"
```


```r
&gt; as.Date("7/10")
```

```
## Error in charToDate(x): character string is not in a standard unambiguous format
```

---

## Date クラス


```r
&gt; a
```

```
## [1] "2018-05-10"
```

```r
&gt; class(a)
```

```
## [1] "Date"
```

Date クラスの日付に対して引き算，足し算が使える。今日から10日後の日付は？


```r
&gt; Sys.Date() + 10
```

```
## [1] "2019-08-17"
```

---

## POSIXct


---

## 今後の課題

- R による時系列（原系列）の表現 (xts, zoo)
- 時系列モデルと R によるモデル化
- 時系列モデルに対する統計的手法
  - 推定
  - 検定
  - 予測
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"countIncrementalSlides": false,
"highlightLines": true,
"highlightStyle": "github"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
